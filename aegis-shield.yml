name: Aegis-Security-Shield ğŸ›¡ï¸

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  security-check:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code ğŸ›°ï¸
        uses: actions/checkout@v4

      - name: Install Rust ğŸ¦€
        uses: dtolnay/rust-toolchain@stable

      # 1. CEK KERENTANAN (AUDIT)
      - name: Audit Dependencies ğŸ”
        run: |
          cargo install cargo-audit
          cargo audit
        # Ini buat mastiin gak ada 'pintu belakang' di library yang Lu pake!

      # 2. CEK LOGIKA (TEST)
      - name: Execute Vn Formula Test âœ…
        run: cargo test --release
        # Mastiin rumus kekayaan Lu tetep presisi sebelum di-deploy!

      # 3. CEK KODE KOTOR (CLIPPY)
      - name: Rust Linting ğŸ§¹
        run: cargo clippy -- -D warnings
        # Mastiin kodingan Lu bersih kayak standar Arsitek Semarang!

      # 4. PROTEKSI SECRET ğŸ”
      - name: Secret Scanning ğŸš«
        run: echo "Mastiin gak ada Vault Address Lu yang bocor di commit!"

